<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>SprontPi Radio Control</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <div class="wrap">
    <div class="card">
      <div id="view-main">
        <h1>SprontPi Radio Control</h1>

        <div class="btns center" style="margin-top:14px;">
          <button class="primary">Play</button>
          <button>Avoid</button>
          <button>Clear</button>
          <button>Open Squelch</button>
        </div>

        <div class="tabs">
          <button type="button" class="tab active" id="tab-airband">Airband</button>
          <button type="button" class="tab" id="tab-ground">Ground</button>
        </div>
        <div class="swipe-hint">Swipe between airband and ground controls.</div>

        <div class="pager" id="pager">
          <div class="pager-inner" id="pager-inner">
            <section class="page">
              <div class="page-title">Airband Scanner Controls</div>
              <div class="profiles" id="profiles-airband"></div>

              <div class="controls">
                <div class="ctrl">
                  <div class="ctrl-head"><b>Gain (dB)</b><span>Applied: <span id="applied-gain-airband">…</span></span></div>
                  <input id="gain-airband" class="range" type="range" min="0" max="28" step="1" />
                  <div class="ctrl-readout"><span>Selected: <span id="selected-gain-airband">…</span> dB</span><span>RTL-SDR steps</span></div>
                </div>

                <div class="ctrl" id="dbfs-ctrl-airband">
                  <div class="ctrl-head"><b>Squelch (dBFS)</b><span>Applied: <span id="applied-dbfs-airband">…</span></span></div>
                  <input id="dbfs-airband" class="range" type="range" min="-120" max="0" step="1" />
                  <div class="ctrl-readout"><span>Selected: <span id="selected-dbfs-airband">…</span> dBFS</span><span>0 = auto; negative opens more (try -70 to -100)</span></div>
                </div>

                <div class="ctrl">
                  <div class="ctrl-head"><b>Noise Filter (Hz)</b><span>Applied: <span id="applied-filter-airband">…</span></span></div>
                  <input id="filter-airband" class="range" type="range" min="2000" max="5000" step="100" />
                  <div class="ctrl-readout"><span>Selected: <span id="selected-filter-airband">…</span> Hz</span><span>Low-pass filter cutoff</span></div>
                </div>
              </div>
              <!-- Removed extra Airband control buttons -->
              <div class="ctrl" id="manage-profiles">
                <div class="ctrl-head"><b>Manage Profiles</b></div>
                <div class="ctrl-readout">
                  <label><input type="radio" name="manage-target" id="manage-target-airband" value="airband" checked /> Airband</label>
                  <label><input type="radio" name="manage-target" id="manage-target-ground" value="ground" /> Ground</label>
                </div>
                <div class="ctrl-readout">
                  <label>Clone from:
                    <select id="manage-clone"></select>
                  </label>
                </div>
                <div class="ctrl-readout">
                  <label>New ID:
                    <input id="manage-id" type="text" placeholder="e.g. kbna_custom" />
                  </label>
                </div>
                <div class="ctrl-readout">
                  <label>Label:
                    <input id="manage-label" type="text" placeholder="Profile label" />
                  </label>
                </div>
                <div class="ctrl-readout">
                  <button type="button" id="manage-create">Create</button>
                  <button type="button" id="manage-rename">Rename Selected</button>
                  <button type="button" id="manage-delete">Delete Selected</button>
                </div>
              </div>

              <div class="ctrl" id="edit-freqs">
                <div class="ctrl-head"><b>Edit Frequencies</b><span>One per line: <code>118.600 TOWER</code></span></div>
                <div class="ctrl-readout" style="gap:10px; flex-wrap:wrap;">
                  <label>Profile:
                    <select id="edit-profile"></select>
                  </label>
                  <span>
                    <button type="button" id="edit-load">Load</button>
                    <button type="button" id="edit-save">Save</button>
                  </span>
                </div>
                <textarea id="edit-text" class="textarea" rows="8" spellcheck="false" placeholder="118.600 TOWER&#10;119.350 APP"></textarea>
                <div class="ctrl-readout"><span id="edit-status"></span><span>Edits persist to the profile file</span></div>
              </div>

              <div class="ctrl player" id="player-airband">
                <div class="ctrl-head"><b>Player</b><span><a href="#" id="lnk-stream-airband">Open stream</a></span></div>
                <audio id="audio-airband" controls preload="none" style="width:100%"></audio>
                <div class="ctrl-readout"><span>Mount: <code>GND.mp3</code></span><span>Use headphones; browser autoplay may require a click</span></div>
              </div>
            </section>

            <section class="page">
              <div class="page-title">Ground Scanner Controls</div>
              <div class="profiles hidden" id="profiles-ground"></div>
              <div class="controls">
                <div class="ctrl">
                  <div class="ctrl-head"><b>Gain (dB)</b><span>Applied: <span id="applied-gain-ground">…</span></span></div>
                  <input id="gain-ground" class="range" type="range" min="0" max="28" step="1" />
                  <div class="ctrl-readout"><span>Selected: <span id="selected-gain-ground">…</span> dB</span><span>RTL-SDR steps</span></div>
                </div>

                <div class="ctrl" id="dbfs-ctrl-ground">
                  <div class="ctrl-head"><b>Squelch (dBFS)</b><span>Applied: <span id="applied-dbfs-ground">…</span></span></div>
                  <input id="dbfs-ground" class="range" type="range" min="-120" max="0" step="1" />
                  <div class="ctrl-readout"><span>Selected: <span id="selected-dbfs-ground">…</span> dBFS</span><span>0 = auto; negative opens more (try -70 to -100)</span></div>
                </div>

                <div class="ctrl">
                  <div class="ctrl-head"><b>Noise Filter (Hz)</b><span>Applied: <span id="applied-filter-ground">…</span></span></div>
                  <input id="filter-ground" class="range" type="range" min="2000" max="5000" step="100" />
                  <div class="ctrl-readout"><span>Selected: <span id="selected-filter-ground">…</span> Hz</span><span>Low-pass filter cutoff</span></div>
                </div>
              </div>
              <!-- Removed extra Ground control buttons -->
              <div class="ctrl player" id="player-ground">
                <div class="ctrl-head"><b>Player</b><span><a href="#" id="lnk-stream-ground">Open stream</a></span></div>
                <audio id="audio-ground" controls preload="none" style="width:100%"></audio>
                <div class="ctrl-readout"><span>Mount: <code>GND.mp3</code></span><span>Use headphones; browser autoplay may require a click</span></div>
              </div>
              <div class="foot">Both scanners feed the same Icecast stream.</div>
            </section>
          </div>
        </div>

        <div class="warn" id="warn"></div>
        <div class="avoids" id="avoids-summary"></div>
        <div class="foot">© 2026 Will Minkoff • <a href="#" id="lnk-diagnostic">Generate log</a></div>
      </div>

      <div id="view-hits" class="hidden">
        <div class="nav">
          <button type="button" id="btn-hit-back">Back</button>
          <h1 style="margin:0;">Live Hit List</h1>
        </div>
        <div class="hit-list" id="hit-list">
          <div class="hit-row head"><div>Time</div><div>Frequency</div><div>Duration</div></div>
        </div>
        <div class="foot">Showing the latest 20 hits from the scanner journal.</div>
      </div>
    </div>
  </div>

  <script src="/static/script.js"></script>
</body>
</html>
